                 E M P I R E  3.1 (Rivoli)
               Sao Jose dos Campos, Brazil   
                       June 2011
                    Upton, NY, USA   
                      January 2012


EMPIRE 3.1 has been tested successfully on Linux (Ubuntu, Redhat) and Mac OS X (10.5 
and higher).  It can also be run on Windows with either the MinGW and Cygwin 
environments.  EMPIRE is provided as source code that must be compiled to function.

Required:
    Fortran90 compiler: gfortran (version 4.4 on Linux or 4.6 on MacOSX or higher) or ifort (version 11?)
    C/C++ compiler
    Python, Tcl/Tk

Recommended:
    Tcl/Tk version 8.4 and the [incr Tcl] extension to Tcl/Tk, both are included in the ActiveTcl 
    distributions on the empire download page.  The Empire GUI may also work on Tcl/Tk version 8.5 and 
    higher as elements of [incr Tcl] were added in versions 8.5 and 8.6.



Graphical Installation 
======================

EMPIRE now has a graphical installer using IzPack.  To use it, download either the base 
distribution () or the full, web-based distribution ().
Then execute the jar file:

    $ java -jar EMPIRE-3.1-base.jar

On both MacOSX and Linux systems, you can do this by simply clicking on the jar file 
from a file manager.  This installer has been tested on Linux and MacOSX.

To run empire you may create a working subdirectory of your empire root 
[e.g. ~/empire-3.1-rivoli/Fe56new], change to it and launch the EMPIRE GUI (Xrun.tcl):

    $ mkdir Fe56new
    $ cd Fe56new
    $ ../scripts/Xrun.tcl & 



Non-graphical Installation
==========================

1)  Download the following files from http://www.nndc.bnl.gov/empire/ and place 
    them in the same temporary directory (e.g. ~/empire-tmp/):

        setup.sh
        EMPIRE-3.1-RIVOLI.tgz
        level-densities-hfb.tgz [Optional]
        C4-latest.tgz [Optional]
        ActiveTcl8.4.7.0-linux-ix86-108887.tar.gz [Optional - for Linux]
        ActiveTcl8.4.19.5.19.294317-macosx-universal-threaded.dmg [Optional - for Mac OSX]

2)  Run the setup.sh script

        $ sh install.sh

    Then follow the on screen instructions.  The installation script will detect whether 
    the optional files are present in your temporary directory and attempt to install them.
    On the Mac, you may need to install the ActiveTcl package manually.  If so, follow the 
    manual instructions below.

To run empire you may create a working subdirectory of your empire root 
[e.g. ~/empire-3.1-rivoli/Fe56new], change to it and launch the EMPIRE GUI (Xrun.tcl):

    $ mkdir Fe56new
    $ cd Fe56new
    $ ../scripts/Xrun.tcl & 



Manual Installation
===================

1)  Download the files listed above in the non-graphical installation.  We will assume 
    that you put all of the downloaded files in the directory ~/empire-tmp/ and are working 
    from this directory.

2)  Unpack EMPIRE-3.1-RIVOLI.tgz

        $ tar xzf EMPIRE-3.1-RIVOLI.tgz

    This will unpack to a directory called EMPIRE-3.1-RIVOLI/.

3)  Build the package

        $ cd EMPIRE-3.1-RIVOLI/
        $ make
        $ cd ~/empire-tmp/

4)  [Optional] Untar the HFB level-density distribution file level-densities-hfb.tgz to the 
    corresponding subdirectory RIPL/densities/total/level-densities-hfb (if you plan to use 
    RIPL HFB level densities):

        $ cd EMPIRE-3.1-RIVOLI/RIPL/densities/total/
        $ tar xzf ~/empire-tmp/level-densities-hfb.tgz
        $ cd ~/empire-tmp/

5)  [Optional] Unzip the distribution file C4-latest.zip to the corresponding subdirectory 
    (EXFOR/) to get the automatic retrieval and plotting of EXFOR experimental 
    data:

        $ cd EMPIRE-3.1-RIVOLI/
        $ tar xzf ~/empire-tmp/C4-latest.tgz
        $ cd ~/empire-tmp/

    You may also update the EXFOR files yourself using the latest version available from 
    the IAEA at http://www-nds.iaea.org/x4toc4-master/.   The C4 formatted source files 
    have names like C4-Dec-11-2012.zip.  Unzip it, in the EMPIRE-3.1-RIVOLI/EXFOR/ directory 
    and run the parseC4.py script:

        $ python parseC4.py C4-Dec-11-2012.x4c4

6)  [Optional] Install ActiveTcl8.4

    On MacOSX systems download the dmg file and click on it using your file manager and 
    follow the installation instructions.

    On Linux systems:
        $ tar xzf ~/empire-tmp/ActiveTcl8.4.7.0-linux-ix86-108887.tar.gz
        $ cd ActiveTcl8.4.7.0-linux-ix86/
        $ sh install.sh
        $ cd ~/empire-tmp/

6)  After this is all completed, you may move or rename your empire directory and delete 
    the temporary directory.

7)  [Optional] Add $EMPIREDIR to your .bashrc or .cshrc and put empire in your $PATH.  In
    this step, we assume that your files are in the directory $instdir:

    For a sh or similar perform
        EMPIREDIR="'$instdir'" 
        PATH="'$instdir/ActiveTcl/bin:./:$instdir/scripts':$PATH"
        export EMPIREDIR PATH

    For a csh or compatible perform
        setenv EMPIREDIR "'$instdir'" 
        setenv PATH "'$instdir/ActiveTcl/bin:./:$instdir/scripts':$PATH"
        export EMPIREDIR PATH 

    On the Mac, to make sure zvview works, you must also add to your bashrc file:
        export DISPLAY=:0

To run empire you may create a working subdirectory of your empire root 
[e.g. ~/empire-3.1-rivoli/Fe56new], change to it and launch the EMPIRE GUI (Xrun.tcl):

    $ mkdir Fe56new
    $ cd Fe56new
    $ ../scripts/Xrun.tcl & 



Good calculations !
The EMPIRE team
_______________________________________________________________________
Report problems to: r.capotenoy@iaea.org (IAEA); mwherman@bnl.gov (BNL)